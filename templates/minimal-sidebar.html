<!DOCTYPE html>
<html lang="{{ defaults.language }}">
<head>
    <meta charset="UTF-8">
    <title>Quotation {{ quotation.number }}</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700&family=DM+Sans:wght@400;500&family=JetBrains+Mono:wght@400&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: {{ colors.primary }};
            --accent: {{ colors.accent }};
            --text: {{ colors.text }};
            --muted: {{ colors.muted }};
            --border: {{ colors.border }};
            --table-alt: {{ colors.table_alt }};
            --font-heading: 'Outfit', sans-serif;
            --font-body: 'DM Sans', sans-serif;
            --font-mono: 'JetBrains Mono', monospace;
        }
        {% include 'minimal-sidebar.css' %}
    </style>
</head>
<body>
    <aside>
        <div class="sidebar-inner">
            <div class="sidebar-header">
                {% if company.logo %}
                <img src="{{ company.logo }}" alt="Logo" class="logo">
                {% endif %}
                <h1 class="company-name">{{ company.name }}</h1>
                {% if company.tagline %}
                <p class="tagline">{{ company.tagline }}</p>
                {% endif %}
            </div>

            <nav class="sidebar-nav">
                <div class="sidebar-block">
                    <span class="block-label">{% if defaults.language == 'de' %}Kontakt{% else %}Contact{% endif %}</span>
                    <div class="block-content">
                        <p>{{ contact.street }}</p>
                        <p>{{ contact.postal_code }} {{ contact.city }}</p>
                        <p>{{ contact.country }}</p>
                        <p class="contact-link">{{ contact.phone }}</p>
                        <p class="contact-link">{{ contact.email }}</p>
                        <p class="contact-link">{{ contact.website }}</p>
                    </div>
                </div>

                <div class="sidebar-block">
                    <span class="block-label">{% if defaults.language == 'de' %}Dokument{% else %}Document{% endif %}</span>
                    <div class="block-content meta-grid">
                        <span class="meta-key">{% if defaults.language == 'de' %}Nr.{% else %}No.{% endif %}</span>
                        <span class="meta-value">{{ quotation.number }}</span>
                        <span class="meta-key">{% if defaults.language == 'de' %}Datum{% else %}Date{% endif %}</span>
                        <span class="meta-value">{{ quotation.date }}</span>
                        <span class="meta-key">{% if defaults.language == 'de' %}Gültig{% else %}Valid{% endif %}</span>
                        <span class="meta-value">{{ quotation.valid_days }} {% if defaults.language == 'de' %}Tage{% else %}days{% endif %}</span>
                    </div>
                </div>

                <div class="sidebar-block">
                    <span class="block-label">{% if defaults.language == 'de' %}Bankverbindung{% else %}Banking{% endif %}</span>
                    <div class="block-content">
                        <p>{{ bank.bank_name }}</p>
                        <p class="iban">{{ bank.iban }}</p>
                        <p>{{ bank.bic }}</p>
                    </div>
                </div>

                {% if defaults.vat_type == 'german_vat' and legal.tax_id %}
                <div class="sidebar-block">
                    <span class="block-label">{% if defaults.language == 'de' %}Rechtliches{% else %}Legal{% endif %}</span>
                    <div class="block-content">
                        <p>{% if defaults.language == 'de' %}USt-IdNr.{% else %}VAT{% endif %}: {{ legal.tax_id }}</p>
                        {% if legal.chamber_of_commerce %}
                        <p>KvK: {{ legal.chamber_of_commerce }}</p>
                        {% endif %}
                    </div>
                </div>
                {% endif %}
            </nav>

            {% if snippets.custom_footer %}
            <div class="sidebar-footer">
                <p>{{ snippets.custom_footer }}</p>
            </div>
            {% endif %}
        </div>
    </aside>

    <main>
        <header class="document-header">
            <div class="doc-type">
                <span class="doc-type-label">{% if defaults.language == 'de' %}Angebot{% else %}Quotation{% endif %}</span>
                <span class="doc-number">#{{ quotation.number }}</span>
            </div>
        </header>

        <section class="recipient-card">
            <div class="recipient-label">{% if defaults.language == 'de' %}Empfänger{% else %}Prepared For{% endif %}</div>
            <div class="recipient-details">
                <p class="recipient-name">{{ client.name }}</p>
                <p class="recipient-address">{{ client.address }}</p>
                <p class="recipient-email">{{ client.email }}</p>
            </div>
        </section>

        {% if snippets.intro_text %}
        <section class="intro-section">
            <p>{{ snippets.intro_text }}</p>
        </section>
        {% endif %}

        <section class="content-section">
            {{ content | safe }}
        </section>
        
        {% if snippets.terms %}
        <section class="terms-section">
            <div class="terms-label">{% if defaults.language == 'de' %}Bedingungen{% else %}Terms{% endif %}</div>
            <p>{{ snippets.terms }}</p>
        </section>
        {% endif %}
        
        {% if snippets.signature_block %}
        <section class="signature-section">
            <div class="signature-box">
                <div class="signature-area"></div>
                <span class="signature-name">{{ company.name }}</span>
            </div>
        </section>
        {% endif %}

        {% if defaults.vat_type == 'kleinunternehmer' %}
        <aside class="vat-notice">
            <p>Kein Ausweis von Umsatzsteuer, da Kleinunternehmer gemäß §19 UStG.</p>
        </aside>
        {% endif %}
    </main>
</body>
</html>
