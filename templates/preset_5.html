<!DOCTYPE html>
<html lang="{{ defaults.language }}">
<head>
    <meta charset="UTF-8">
    <title>Quotation {{ quotation.number }}</title>
    <link href="https://fonts.googleapis.com/css2?family={{ typography.heading|replace(' ', '+') }}:wght@400;600;700&family={{ typography.body|replace(' ', '+') }}:wght@300;400;600&family={{ typography.mono|replace(' ', '+') }}&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: {{ colors.primary }};
            --accent: {{ colors.accent }};
            --text: {{ colors.text }};
            --muted: {{ colors.muted }};
            --border: {{ colors.border }};
            --table-alt: {{ colors.table_alt }};
            --font-heading: '{{ typography.heading }}', sans-serif;
            --font-body: '{{ typography.body }}', sans-serif;
            --font-mono: '{{ typography.mono }}', monospace;
        }
        {% include 'preset_5.css' %}
    </style>
</head>
<body>
    <!-- Decorative Top Bar -->
    <div class="top-bar"></div>

    <header>
        <div class="brand-section">
            {% if company.show_logo and company.logo %}
            <div class="logo-container">
                <img src="{{ company.logo }}" alt="{{ company.name }}" class="logo">
            </div>
            {% endif %}
            <div class="company-details">
                {% if company.show_name %}
                <h1 class="company-name">{{ company.name }}</h1>
                {% endif %}
                {% if company.show_tagline and company.tagline %}
                <div class="tagline">{{ company.tagline }}</div>
                {% endif %}
            </div>
        </div>
        
        <div class="sender-info">
            <div class="sender-address">
                {{ contact.street }} &middot; {{ contact.postal_code }} {{ contact.city }} &middot; {{ contact.country }}
            </div>
            <div class="sender-contact">
                {% if contact.phone %}<span>{{ contact.phone }}</span>{% endif %}
                {% if contact.email %}<span>{{ contact.email }}</span>{% endif %}
                {% if contact.website %}<span>{{ contact.website }}</span>{% endif %}
            </div>
        </div>
    </header>

    <div class="meta-container">
        <div class="recipient-section">
            <div class="label">{% if defaults.language == 'de' %}Empfänger{% else %}To{% endif %}</div>
            <div class="recipient-details">
                <strong>{{ client.name }}</strong><br>
                {{ client.address | replace('\n', '<br>') | safe }}
            </div>
        </div>

        <div class="document-details">
            <div class="document-title">
                {% if defaults.language == 'de' %}ANGEBOT{% else %}QUOTATION{% endif %}
            </div>
            <table class="details-table">
                <tr>
                    <td class="detail-label">{% if defaults.language == 'de' %}Datum{% else %}Date{% endif %}</td>
                    <td class="detail-value">{{ quotation.date }}</td>
                </tr>
                <tr>
                    <td class="detail-label">{% if defaults.language == 'de' %}Nummer{% else %}No.{% endif %}</td>
                    <td class="detail-value">{{ quotation.number }}</td>
                </tr>
                <tr>
                    <td class="detail-label">{% if defaults.language == 'de' %}Gültig bis{% else %}Valid until{% endif %}</td>
                    <td class="detail-value">{{ quotation.valid_days }} {% if defaults.language == 'de' %}Tage{% else %}days{% endif %}</td>
                </tr>
                {% if client.customer_number %}
                <tr>
                    <td class="detail-label">{% if defaults.language == 'de' %}Kunden-Nr.{% else %}Cust. ID{% endif %}</td>
                    <td class="detail-value">{{ client.customer_number }}</td>
                </tr>
                {% endif %}
            </table>
        </div>
    </div>

    <main>
        {% if snippets.intro_text %}
        <div class="intro-text">
            {{ snippets.intro_text }}
        </div>
        {% endif %}

        <div class="items-table-container">
            {{ content | safe }}
        </div>

        <div class="closing-section">
            {% if snippets.terms %}
            <div class="terms-block">
                <div class="terms-title">{% if defaults.language == 'de' %}Bedingungen{% else %}Terms{% endif %}</div>
                <p>{{ snippets.terms }}</p>
            </div>
            {% endif %}

            {% if snippets.signature_block %}
            <div class="signature-block">
                <div class="signature-line">
                    <div class="line"></div>
                    <div class="sub">{% if defaults.language == 'de' %}Datum & Unterschrift{% else %}Date & Signature{% endif %}</div>
                </div>
            </div>
            {% endif %}
        </div>
        
        {% if defaults.vat_type == 'kleinunternehmer' %}
        <p class="vat-note">
            {% if defaults.language == 'de' %}
            Gemäß § 19 UStG wird keine Umsatzsteuer berechnet.
            {% else %}
            According to § 19 UStG no sales tax is charged.
            {% endif %}
        </p>
        {% endif %}
    </main>

    <div class="page-footer">
        <div class="footer-columns">
            <div class="col">
                <strong>{{ company.name }}</strong><br>
                {{ contact.street }}<br>
                {{ contact.postal_code }} {{ contact.city }}
            </div>
            <div class="col">
                <strong>{% if defaults.language == 'de' %}Kontakt{% else %}Contact{% endif %}</strong><br>
                {{ contact.email }}<br>
                {{ contact.phone }}
            </div>
            <div class="col">
                <strong>Bank</strong><br>
                {{ bank.bank_name }}<br>
                {{ bank.iban }}<br>
                BIC: {{ bank.bic }}
            </div>
            <div class="col">
                <strong>{% if defaults.language == 'de' %}Details{% else %}Details{% endif %}</strong><br>
                {% if legal.tax_id %}VAT: {{ legal.tax_id }}<br>{% endif %}
                {% if legal.chamber_of_commerce %}CoC: {{ legal.chamber_of_commerce }}{% endif %}
            </div>
        </div>
    </div>
</body>
</html>
